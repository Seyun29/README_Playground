name: Dispatch Test

on:
  workflow_dispatch:
    inputs:
      env:
          type: choice
          description: select deploy environment
          required: true
          options:
            - development
            - staging
            - production
      #in case of deploying to multiregion
      region:
        type: choice
        required: false
        description: Choose Region for production (only for ECS-MultiRegion deployment)
        options:
          - Tokyo
          - Seoul
          - Oregon
          - Frankfurt
          - Skip (Not deploying to ECS-MultiRegion)
        default: Skip (Not deploying to ECS-MultiRegion)
      
      #in case of releasing lambda-billing
      function:
        type: choice
        required: false
        description: Choose Function to deploy (only for releasing Lambda)
        options:
            - all
            - appleIapWebhook
            - cancelSubscription
            - createCustomSubscription
            - createSession
            - createSubscription
            - createSubscriptionCouponOnly
            - deleteCouponServer
            - deleteCustomer
            - getCoupon
            - getCouponServer
            - getInvoices
            - getSession
            - getSubscription
            - getUpcomingInvoice
            - issueCouponServer
            - pollingAppleIapReceipt
            - pollingCustomSubscription
            - resumeSubscription
            - stripeWebhook
            - updateCustomSubscription
            - updateSubscription
            - Skip (Not releasing Lambda)
        default: Skip (Not releasing Lambda)

jobs:
  print-tag:
    runs-on: ubuntu-latest
    if:  ${{ inputs.print_tags }} 
    steps:
      - name: Check if region input is provided
        run: |
          if [[ "${{ github.event.inputs.region }}" == "null" ]]; then
            echo "Region input not provided"
          else
            echo "Region input provided: ${{ github.event.inputs.region }}"
          fi
        shell: bash
